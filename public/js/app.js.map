{"version":3,"sources":["js/app.js","js/controllers/auth.js","js/models/contract.js","js/directives/dragDrop.js","js/directives/googleMap.js","js/controllers/main.js","js/models/mubee.js","js/controllers/mubees.js","js/models/payment.js","js/controllers/payments.js","js/models/review.js","js/router.js","js/controllers/search.js","js/models/skill.js","js/directives/starRating.js","js/models/user.js","js/controllers/users.js"],"names":["Auth","$authProvider","API_URL","loginUrl","signupUrl","tokenPrefix","facebook","clientId","RegisterController","$auth","$state","submit","signup","register","user","then","go","this","LoginController","login","credentials","Contract","$resource","id","update","method","dragDrop","reader","FileReader","restrict","replace","templateUrl","scope","base64","link","$scope","element","active","onload","result","$apply","on","e","preventDefault","file","target","files","dataTransfer","readAsDataURL","googleplace","$window","require","location","lat","lng","attrs","model","options","types","componentRestrictions","autocomplete","google","maps","places","Autocomplete","addListener","place","getPlace","latLng","geometry","toJSON","$setViewValue","val","MainController","$rootScope","$http","toggleMenu","main","menuVisible","logout","localStorage","removeItem","secureState","toState","toParams","isAuthenticated","currentUserId","getPayload","protectedStates","includes","name","parseFloat","isLoggedIn","$on","Mubee","MubeesCreateController","Payment","createMubee","save","mubeesCreate","mubee","crew_id","params","crewId","stripeCustomer","get","contracts","query","create","MubeesShowController","Review","acceptRequest","console","log","mubeesShow","accepted","$update","isCurrentMubee","Number","createReview","review","sender","recipient","review_recipient_role","mubee_id","$promise","isOwnProfile","crew","MubeesEditController","mubeesEdit","deleteMubee","$remove","delete","PaymentsController","saveCustomer","status","response","stripeToken","paymentsShow","Router","$stateProvider","$urlRouterProvider","state","url","controller","otherwise","SearchController","Skill","filterUsers","search","querySkills","skill_ids","map","skill","latitude","longitude","skills","RatingController","rating1","rating2","isReadonly","rateFunction","rating","starRating","template","ratingValue","max","onRatingSelect","readonly","attributes","updateStars","stars","i","push","filled","undefined","toggle","index","$watch","oldValue","newValue","User","UsersIndexController","usersIndex","showForm","all","UsersShowController","usersShow","isCurrentUser","producer_id","UsersEditController","addSkills","usersEdit","UsersDashboardController","usersDashboard","angular","module","constant","window","hostname","config","Stripe","setPublishableKey","$inject","factory","directive"],"mappings":"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","file":"app.js","sourcesContent":["angular.module('finalProject', ['ngResource', 'ui.router', 'stripe', 'satellizer', 'ui.select', 'ngSanitize', 'uiSwitch','ngHamburger'])\n  .constant('API_URL', window.location.hostname === 'localhost' ? 'http://localhost:3000/api' : 'https://mubeeapp.herokuapp.com/api')\n  .config(Auth)\n  .config(\n    function() {\n      Stripe.setPublishableKey('pk_test_2DNYpLVI6IGvyQ26xOMwISkq');\n    }\n  );\n\nAuth.$inject = ['$authProvider', 'API_URL'];\nfunction Auth($authProvider, API_URL) {\n  $authProvider.loginUrl = `${API_URL}/login`;\n  $authProvider.signupUrl = `${API_URL}/register`;\n\n  $authProvider.tokenPrefix = '';\n  $authProvider.facebook({\n    clientId: '283342332068635'\n  });\n}\n","angular.module('finalProject')\n  .controller('RegisterController', RegisterController)\n  .controller('LoginController', LoginController);\n\nRegisterController.$inject = ['$auth', '$state'];\nfunction RegisterController($auth, $state) {\n  const register = this;\n\n  register.user = {};\n\n  function submit() {\n    $auth.signup(register.user)\n      .then(() => {\n        $state.go('login');\n      });\n  }\n\n  register.submit = submit;\n}\n\nLoginController.$inject = ['$auth', '$state'];\nfunction LoginController($auth, $state) {\n  const login = this;\n\n  login.credentials = {};\n\n  function submit() {\n    $auth.login(login.credentials)\n      .then(() => {\n        $state.go('usersDashboard');\n      });\n  }\n//   function authenticate(service) {\n//     $auth.authenticate(service, () => {\n//       $state.go('filmsIndex');\n//     });\n//   }\n//\n//   login.authenticate = authenticate;\n//\n  login.submit = submit;\n}\n","angular.module('finalProject')\n  .factory('Contract', Contract);\n\nContract.$inject = ['$resource', 'API_URL'];\nfunction Contract($resource, API_URL) {\n  return new $resource(`${API_URL}/contracts/:id`, { id: '@id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","angular.module('finalProject')\n .directive('dragDrop', dragDrop);\n\nfunction dragDrop() {\n\n  const reader = new FileReader();\n\n  return {\n    restrict: 'E',\n    replace: true,\n    templateUrl: 'templates/dragDrop.html',\n    scope: {\n      base64: '='\n    },\n    link($scope, element) {\n\n      $scope.base64 = null;\n      $scope.active = false;\n\n      reader.onload = () => {\n        $scope.base64 = reader.result;\n        $scope.$apply();\n      };\n\n      element\n      .on('dragover', () => {\n        $scope.active = true;\n        $scope.$apply();\n      })\n       .on('dragover', (e) => {\n         e.preventDefault();\n       })\n       .on('dragleave', () => {\n         $scope.active = false;\n         $scope.$apply();\n       })\n       .on('drop', (e)  => {\n         e.preventDefault();\n         const file = (e.target.files || e.dataTransfer.files)[0];\n\n         reader.readAsDataURL(file);\n       });\n    }\n  };\n}\n","angular.module('finalProject')\n .directive('googleplace', googleplace);\n\ngoogleplace.$inject = ['$window'];\nfunction googleplace($window) {\n return {\n   restrict: 'A',\n   require: 'ngModel',\n   scope: {\n     location: '=',\n     lat: '=',\n     lng: '='\n   },\n   link: function(scope, element, attrs, model) {\n     const options = {\n       types: [],\n       componentRestrictions: {}\n     };\n\n     const autocomplete = new $window.google.maps.places.Autocomplete(element[0], options);\n\n     autocomplete.addListener('place_changed', () => {\n       const place = autocomplete.getPlace();\n       const latLng = place.geometry.location.toJSON();\n       scope.lat = latLng.lat;\n       scope.lng = latLng.lng;\n       model.$setViewValue(element.val());\n     });\n   }\n };\n}\n","angular.module('finalProject')\n  .controller('MainController', MainController);\n\nMainController.$inject = ['$rootScope', '$auth', '$state','$http'];\nfunction MainController($rootScope, $auth, $state, $http) {\n  const main = this;\n  main.isLoggedIn = $auth.isAuthenticated;\n  //  main.message = null;\n  main.menuVisible = false;\n\n\n  function toggleMenu() {\n    main.menuVisible = !main.menuVisible;\n  }\n\n  function logout() {\n    $auth.logout()\n     .then(() => {\n       localStorage.removeItem('userId');\n       $state.go('splash');\n     });\n  }\n\n  const protectedStates = ['usersEdit'];\n\n  function secureState(e, toState, toParams) {\n\n    if($auth.isAuthenticated()) {\n      main.currentUserId = $auth.getPayload().id;\n    }\n\n    if((!$auth.isAuthenticated() &&\n    protectedStates.includes(toState.name)) ||\n    toState.name === 'usersEdit' && (parseFloat(toParams.id) !== $auth.getPayload().id)) {\n      e.preventDefault();\n      $state.go('login');\n    }\n  }\n\n  $rootScope.$on('$stateChangeStart', secureState);\n  main.logout = logout;\n  main.toggleMenu = toggleMenu;\n}\n\n\n\n//\n// MainController.$inject = ['$auth', '$state', '$rootScope', '$http'];\n// function MainController($auth, $state, $rootScope, $http) {\n//   const main = this;\n//   main.isLoggedIn = $auth.isAuthenticated;\n//   main.message = null;\n//   main.menuVisible = false;\n//\n//   function toggleMenu() {\n//     main.menuVisible = !main.menuVisible;\n//   }\n//\n//   function logout() {\n//     $auth.logout()\n//     .then(() => {\n//       localStorage.removeItem('userId');\n//       $state.go('splash');\n//     });\n//   }\n//\n//   const protectedStates = ['profile','groupProfile','profileEdit','groupEdit'];\n//\n//   function secureState(e, toState) {\n//     main.menuVisible = false;\n//     main.message = null;\n//     if(!$auth.isAuthenticated() && protectedStates.includes(toState.name)) {\n//       e.preventDefault();\n//       $state.go('login');\n//       main.message = 'You must be logged in to go there!';\n//     }\n//\n//   }\n//\n//   $rootScope.$on('$stateChangeStart', secureState);\n//\n//   main.logout = logout;\n//   main.toggleMenu = toggleMenu;\n//\n//\n// }\n","angular.module('finalProject')\n  .factory('Mubee', Mubee);\n\nMubee.$inject = ['$resource', 'API_URL'];\nfunction Mubee($resource, API_URL) {\n  return new $resource(`${API_URL}/mubees/:id`, { id: '@id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","angular.module('finalProject')\n  .controller('MubeesEditController', MubeesEditController)\n  .controller('MubeesShowController', MubeesShowController)\n  .controller('MubeesCreateController', MubeesCreateController);\n\nMubeesCreateController.$inject = ['Mubee', '$state', 'Contract', 'Payment'];\nfunction MubeesCreateController(Mubee, $state, Contract, Payment) {\n  const mubeesCreate = this;\n\n  mubeesCreate.mubee = {\n    crew_id: $state.params.crewId\n  };\n\n  mubeesCreate.stripeCustomer = Payment.get({});\n\n  mubeesCreate.contracts = Contract.query();\n\n  function createMubee() {\n    Mubee.save(mubeesCreate.mubee, () => {\n      $state.go('usersDashboard');\n    });\n  }\n\n  mubeesCreate.create = createMubee;\n}\n\n\nMubeesShowController.$inject = ['Mubee', 'Review', '$state', '$auth'];\nfunction MubeesShowController(Mubee, Review, $state, $auth) {\n  const mubeesShow = this;\n\n  function acceptRequest() {\n    console.log('clicked');\n    mubeesShow.mubee.accepted = true;\n    mubeesShow.mubee.$update(() => {\n      $state.go('usersDashboard');\n    });\n  }\n  mubeesShow.currentUserId = $auth.getPayload().id;\n\n  mubeesShow.mubee = Mubee.get($state.params);\n\n  mubeesShow.mubee.$promise.then(function(mubee) {\n    mubeesShow.isOwnProfile = (mubeesShow.currentUserId ===  mubee.crew.id);\n  });\n\n  function isCurrentMubee() {\n    return $auth.getPayload().id === Number($state.params.id);\n  }\n\n  mubeesShow.isCurrentMubee = isCurrentMubee;\n  // mubeesShow.isOwnProfile = isOwnProfile;\n\n  mubeesShow.acceptRequest = acceptRequest;\n\n  function createReview() {\n    const currentUserId = $auth.getPayload().id;\n\n    mubeesShow.review.sender = currentUserId;\n    mubeesShow.review.recipient = mubeesShow.mubee[mubeesShow.mubee.review_recipient_role].id;\n    mubeesShow.review.mubee_id = mubeesShow.mubee.id;\n\n    console.log(mubeesShow.review);\n    Review.save(mubeesShow.review, () => {\n      $state.go('usersShow', {id: mubeesShow.review.recipient });\n    });\n  }\n\n  mubeesShow.createReview = createReview;\n}\n\nMubeesEditController.$inject = ['Mubee', '$state', 'Contract'];\nfunction MubeesEditController(Mubee, $state, Contract) {\n  const mubeesEdit = this;\n\n  mubeesEdit.mubee = Mubee.get($state.params);\n  mubeesEdit.contracts = Contract.query();\n\n  function update() {\n    mubeesEdit.mubee.$update(() => {\n      $state.go('usersDashboard', { id: mubeesEdit.mubee.id });\n    });\n  }\n  function deleteMubee() {\n    mubeesEdit.mubee.$remove(() => {\n      $state.go('usersDashboard');\n    });\n  }\n  this.delete = deleteMubee;\n  this.update = update;\n}\n","angular.module('finalProject')\n  .factory('Payment', Payment);\n\nPayment.$inject = ['$resource', 'API_URL'];\nfunction Payment($resource, API_URL) {\n  return new $resource(`${API_URL}/charges`);\n}\n","angular.module('finalProject')\n.controller('PaymentsController', PaymentsController);\n\n\nPaymentsController.$inject = ['Payment', '$state', '$http', '$scope'];\n\nfunction PaymentsController(Payment, $state, $http, $scope) {\n  $scope.saveCustomer = function (status, response) {\n    // $http.post('http://localhost:3000/api/charges', { stripeToken: response.id });\n    // $state.go('dashboard');\n    Payment.save({ stripeToken: response.id }, function(stripeCustomer) {\n      paymentsShow.stripeCustomer = stripeCustomer;\n    });\n  };\n\n  const paymentsShow = this;\n\n  paymentsShow.stripeCustomer = Payment.get({});\n}\n","angular.module('finalProject')\n  .factory('Review', Review);\n\nReview.$inject = ['$resource', 'API_URL'];\nfunction Review($resource, API_URL) {\n  return new $resource(`${API_URL}/reviews/:id`, { id: '@id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","angular.module('finalProject')\n  .config(Router);\n\nRouter.$inject = ['$stateProvider', '$urlRouterProvider'];\nfunction Router($stateProvider, $urlRouterProvider) {\n  $stateProvider\n    .state('splash', {\n      url: '/',\n      templateUrl: '/templates/splash.html',\n      controller: 'LoginController as login'\n    })\n    .state('search', {\n      url: '/search',\n      templateUrl: '/templates/search.html',\n      controller: 'SearchController as search'\n    })\n    .state('usersIndex', {\n      url: '/users?skill_ids&latitude&longitude',\n      templateUrl: '/templates/usersIndex.html',\n      controller: 'UsersIndexController as usersIndex'\n    })\n    .state('usersShow', {\n      url: '/users/:id',\n      templateUrl: '/templates/usersShow.html',\n      controller: 'UsersShowController as usersShow'\n    })\n    .state('usersEdit', {\n      url: '/users/:id/edit',\n      templateUrl: '/templates/usersEdit.html',\n      controller: 'UsersEditController as usersEdit'\n    })\n    .state('usersDashboard', {\n      url: '/dashboard',\n      templateUrl: '/templates/dashboard.html',\n      controller: 'UsersDashboardController as usersDashboard'\n    })\n    .state('payments', {\n      url: '/payments',\n      templateUrl: '/templates/stripe.html',\n      controller: 'PaymentsController as payments'\n    })\n    // .state('Search', {\n    //   url: '/search',\n    //   templateUrl: '/templates/search.html',\n    //   controller: 'UsersSearchController as Search'\n    // })\n    .state('mubeesCreate', {\n      url: '/mubees?crewId',\n      templateUrl: '/templates/mubeesCreate.html',\n      controller: 'MubeesCreateController as mubeesCreate'\n    })\n    .state('mubeesShow', {\n      url: '/mubees/:id',\n      templateUrl: '/templates/mubeesShow.html',\n      controller: 'MubeesShowController as mubeesShow'\n    })\n    .state('mubeesEdit', {\n      url: '/mubees/:id/edit',\n      templateUrl: '/templates/mubeesEdit.html',\n      controller: 'MubeesEditController as mubeesEdit'\n    })\n    .state('register', {\n      url: '/register',\n      templateUrl: '/templates/register.html',\n      controller: 'RegisterController as register'\n    })\n    .state('login', {\n      url: '/login',\n      templateUrl: '/templates/login.html',\n      controller: 'LoginController as login'\n    });\n\n  $urlRouterProvider.otherwise('/');\n}\n","angular.module('finalProject')\n  .controller('SearchController', SearchController);\n\nSearchController.$inject = ['Skill', '$state'];\nfunction SearchController(Skill, $state) {\n  const search = this;\n\n  search.skills = Skill.query();\n\n  function filterUsers() {\n    const params = {};\n\n    if(search.querySkills) {\n      const skill_ids = search.querySkills.map((skill) => {\n        return skill.id;\n      });\n\n      params.skill_ids = skill_ids;\n    }\n\n    if(search.location) {\n      params.latitude = search.lat;\n      params.longitude = search.lng;\n    }\n\n    $state.go('usersIndex', params);\n  }\n\n  search.filterUsers = filterUsers;\n}\n","angular.module('finalProject')\n  .factory('Skill', Skill);\n\nSkill.$inject = ['$resource', 'API_URL'];\nfunction Skill($resource, API_URL) {\n  return new $resource(`${API_URL}/skills/:id`, { id: '@id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","//\n// (function() {\n//   'use strict';\n//\n//   angular\n//     .module('app', [])\n//     .controller('RatingController', RatingController)\n//     .directive('starRating', starRating);\n//\n//   function RatingController() {\n//     this.rating1 = 5;\n//     this.rating2 = 2;\n//     this.isReadonly = true;\n//     this.rateFunction = function(rating) {\n//       console.log('Rating selected: ' + rating);\n//     };\n//   }\n\nangular.module('finalProject')\n.directive('starRating', starRating)\n.controller('RatingController', RatingController);\n\nfunction RatingController() {\n  this.rating1 = 5;\n  this.rating2 = 2;\n  this.isReadonly = true;\n  this.rateFunction = function(rating) {\n    console.log('Rating selected: ' + rating);\n  };\n}\n\n\nstarRating.$inject = ['$window'];\nfunction starRating() {\n  return {\n    restrict: 'EA',\n    template:\n      '<ul class=\"star-rating\" ng-class=\"{readonly: readonly}\">' +\n      '  <li ng-repeat=\"star in stars\" class=\"star\" ng-class=\"{filled: star.filled}\" ng-click=\"toggle($index)\">' +\n      '    <i class=\"fa fa-star\"></i>' + // or &#9733\n      '  </li>' +\n      '</ul>',\n    scope: {\n      ratingValue: '=ngModel',\n      max: '=?', // optional (default is 5)\n      onRatingSelect: '&?',\n      readonly: '=?'\n    },\n    link: function(scope, element, attributes) {\n      if (scope.max === undefined) {\n        scope.max = 5;\n      }\n      function updateStars() {\n        scope.stars = [];\n        for (var i = 0; i < scope.max; i++) {\n          scope.stars.push({\n            filled: i < scope.ratingValue\n          });\n        }\n      }\n      scope.toggle = function(index) {\n        if (scope.readonly === undefined || scope.readonly === false){\n          scope.ratingValue = index + 1;\n          scope.onRatingSelect({\n            rating: index + 1\n          });\n        }\n      };\n      scope.$watch('ratingValue', function(oldValue, newValue) {\n        if (newValue) {\n          updateStars();\n        }\n      });\n    }\n  };\n}\n","angular.module('finalProject')\n  .factory('User', User);\n\nUser.$inject = ['$resource', 'API_URL'];\nfunction User($resource, API_URL) {\n  return new $resource(`${API_URL}/users/:id`, { id: '@id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","angular.module('finalProject')\n  .controller('UsersIndexController', UsersIndexController)\n  .controller('UsersShowController', UsersShowController)\n  .controller('UsersEditController', UsersEditController)\n  .controller('UsersDashboardController', UsersDashboardController);\n\n\nUsersIndexController.$inject = ['User','Skill', '$state'];\nfunction UsersIndexController(User, Skill, $state) {\n  const usersIndex = this;\n\n  usersIndex.showForm = true;\n  usersIndex.params = {};\n\n  let params = {};\n\n  if($state.params.skill_ids || $state.params.location) {\n    usersIndex.showForm = false;\n    params = $state.params;\n    params['skill_ids[]'] = $state.params.skill_ids;\n    delete params.skill_ids;\n  }\n\n  usersIndex.all = User.query(params);\n\n}\n\nUsersShowController.$inject = ['User', '$state', '$auth','Review'];\nfunction UsersShowController(User, $state, $auth, Review) {\n  const usersShow = this;\n  usersShow.review = {};\n\n  if($auth.isAuthenticated()) {\n    usersShow.currentUserId = $auth.getPayload().id;\n  }\n\n  function isOwnProfile() {\n    return usersShow.currentUserId === usersShow.user.id;\n  }\n\n  function isCurrentUser() {\n    return $auth.getPayload().id === Number($state.params.id);\n  }\n\n  function createReview() {\n    usersShow.review.producer_id = usersShow.currentUserId;\n    usersShow.review.crew_id = $state.params.id;\n    Review.save(usersShow.review, () => {\n      usersShow.user = User.get($state.params);\n    });\n  }\n\n  usersShow.createReview = createReview;\n\n  usersShow.isCurrentUser = isCurrentUser;\n  usersShow.isOwnProfile = isOwnProfile;\n\n\n  usersShow.user = User.get($state.params);\n}\n\nUsersEditController.$inject = ['User', '$state', '$auth', 'Skill'];\nfunction UsersEditController(User, $state, $auth, Skill) {\n  const usersEdit = this;\n\n  usersEdit.skills = Skill.query();\n\n  function isCurrentUser() {\n    return $auth.getPayload().id === Number($state.params.id);\n  }\n\n  usersEdit.isCurrentUser = isCurrentUser;\n\n  usersEdit.user = User.get($state.params);\n\n  function addSkills() {\n    const skill_ids = usersEdit.querySkills.map((skill) => {\n      return skill.id;\n    });\n    usersEdit.user.skill_ids = skill_ids;\n  }\n\n  usersEdit.addSkills = addSkills;\n\n\n  function update() {\n    usersEdit.user.$update(() => {\n      $state.go('usersShow', $state.params);\n    });\n  }\n  this.update = update;\n}\n\n\nUsersDashboardController.$inject = ['User', '$state', '$auth', '$http'];\nfunction UsersDashboardController(User, $state, $auth, $http) {\n  const usersDashboard = this;\n  const currentUserId = $auth.getPayload().id;\n\n  usersDashboard.user = User.get({id: currentUserId});\n\n}\n"]}