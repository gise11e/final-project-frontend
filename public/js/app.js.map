{"version":3,"sources":["js/app.js","js/controllers/auth.js","js/models/contract.js","js/directives/googleMap.js","js/controllers/main.js","js/models/mubee.js","js/controllers/mubees.js","js/models/review.js","js/router.js","js/models/skill.js","js/directives/starRating.js","js/models/user.js","js/controllers/users.js","js/controllers/payments.js"],"names":["Auth","$authProvider","API_URL","loginUrl","signupUrl","tokenPrefix","facebook","clientId","RegisterController","$auth","$state","submit","signup","register","user","then","go","this","LoginController","login","credentials","Contract","$resource","id","update","method","googleplace","$window","restrict","require","scope","location","lat","lng","link","element","attrs","model","options","types","componentRestrictions","autocomplete","google","maps","places","Autocomplete","addListener","place","getPlace","latLng","geometry","toJSON","$setViewValue","val","MainController","$rootScope","$http","toggleMenu","main","menuVisible","logout","localStorage","removeItem","secureState","e","toState","toParams","isAuthenticated","protectedStates","includes","name","parseFloat","getPayload","preventDefault","isLoggedIn","$on","Mubee","MubeesCreateController","createMubee","save","mubeesCreate","mubee","crew_id","params","crewId","contracts","query","create","MubeesShowController","Review","acceptRequest","console","log","mubeesShow","accepted","$update","isCurrentMubee","Number","createReview","currentUserId","review","sender","recipient","review_recipient_role","mubee_id","get","MubeesEditController","mubeesEdit","Router","$stateProvider","$urlRouterProvider","state","url","templateUrl","controller","otherwise","Skill","RatingController","rating1","rating2","isReadonly","rateFunction","rating","starRating","template","ratingValue","max","onRatingSelect","readonly","attributes","updateStars","stars","i","push","filled","undefined","toggle","index","$watch","oldValue","newValue","User","UsersIndexController","filterUsers","usersIndex","querySkills","skill_ids","map","skill","all","showForm","skills","UsersShowController","isCurrentUser","usersShow","producer_id","UsersEditController","addSkills","usersEdit","UsersDashboardController","usersDashboard","angular","module","constant","config","Stripe","setPublishableKey","$inject","factory","directive","$scope","saveCustomer","status","response"],"mappings":"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","file":"app.js","sourcesContent":["angular.module('finalProject', ['ngResource', 'ui.router', 'stripe', 'satellizer', 'ui.select', 'ngSanitize', 'uiSwitch','ngHamburger'])\n  .constant('API_URL', 'http://localhost:3000/api')\n  .config(Auth)\n  .config(\n    function() {\n      Stripe.setPublishableKey('pk_test_2DNYpLVI6IGvyQ26xOMwISkq');\n    }\n  );\n\nAuth.$inject = ['$authProvider', 'API_URL'];\nfunction Auth($authProvider, API_URL) {\n  $authProvider.loginUrl = `${API_URL}/login`;\n  $authProvider.signupUrl = `${API_URL}/register`;\n\n  $authProvider.tokenPrefix = '';\n  $authProvider.facebook({\n    clientId: '283342332068635'\n  });\n}\n","angular.module('finalProject')\n  .controller('RegisterController', RegisterController)\n  .controller('LoginController', LoginController);\n\nRegisterController.$inject = ['$auth', '$state'];\nfunction RegisterController($auth, $state) {\n  const register = this;\n\n  register.user = {};\n\n  function submit() {\n    $auth.signup(register.user)\n      .then(() => {\n        $state.go('login');\n      });\n  }\n\n  register.submit = submit;\n}\n\nLoginController.$inject = ['$auth', '$state'];\nfunction LoginController($auth, $state) {\n  const login = this;\n\n  login.credentials = {};\n\n  function submit() {\n    $auth.login(login.credentials)\n      .then(() => {\n        $state.go('usersDashboard');\n      });\n  }\n//   function authenticate(service) {\n//     $auth.authenticate(service, () => {\n//       $state.go('filmsIndex');\n//     });\n//   }\n//\n//   login.authenticate = authenticate;\n//\n  login.submit = submit;\n}\n","angular.module('finalProject')\n  .factory('Contract', Contract);\n\nContract.$inject = ['$resource', 'API_URL'];\nfunction Contract($resource, API_URL) {\n  return new $resource(`${API_URL}/contracts/:id`, { id: '@id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","angular.module('finalProject')\n .directive('googleplace', googleplace);\n\ngoogleplace.$inject = ['$window'];\nfunction googleplace($window) {\n return {\n   restrict: 'A',\n   require: 'ngModel',\n   scope: {\n     location: '=',\n     lat: '=',\n     lng: '='\n   },\n   link: function(scope, element, attrs, model) {\n     const options = {\n       types: [],\n       componentRestrictions: {}\n     };\n\n     const autocomplete = new $window.google.maps.places.Autocomplete(element[0], options);\n\n     autocomplete.addListener('place_changed', () => {\n       const place = autocomplete.getPlace();\n       const latLng = place.geometry.location.toJSON();\n       scope.lat = latLng.lat;\n       scope.lng = latLng.lng;\n       model.$setViewValue(element.val());\n     });\n   }\n };\n}\n","angular.module('finalProject')\n  .controller('MainController', MainController);\n\nMainController.$inject = ['$rootScope', '$auth', '$state','$http'];\nfunction MainController($rootScope, $auth, $state, $http) {\n  const main = this;\n  main.isLoggedIn = $auth.isAuthenticated;\n  //  main.message = null;\n  main.menuVisible = false;\n\n  function toggleMenu() {\n    main.menuVisible = !main.menuVisible;\n  }\n\n  function logout() {\n    $auth.logout()\n     .then(() => {\n       localStorage.removeItem('userId');\n       $state.go('splash');\n     });\n  }\n\n  const protectedStates = ['usersEdit'];\n\n  function secureState(e, toState, toParams) {\n\n    if((!$auth.isAuthenticated() &&\n    protectedStates.includes(toState.name)) ||\n    toState.name === 'usersEdit' && (parseFloat(toParams.id) !== $auth.getPayload().id)) {\n      e.preventDefault();\n      $state.go('login');\n    }\n  }\n\n  $rootScope.$on('$stateChangeStart', secureState);\n  main.logout = logout;\n  main.toggleMenu = toggleMenu;\n}\n\n\n\n//\n// MainController.$inject = ['$auth', '$state', '$rootScope', '$http'];\n// function MainController($auth, $state, $rootScope, $http) {\n//   const main = this;\n//   main.isLoggedIn = $auth.isAuthenticated;\n//   main.message = null;\n//   main.menuVisible = false;\n//\n//   function toggleMenu() {\n//     main.menuVisible = !main.menuVisible;\n//   }\n//\n//   function logout() {\n//     $auth.logout()\n//     .then(() => {\n//       localStorage.removeItem('userId');\n//       $state.go('splash');\n//     });\n//   }\n//\n//   const protectedStates = ['profile','groupProfile','profileEdit','groupEdit'];\n//\n//   function secureState(e, toState) {\n//     main.menuVisible = false;\n//     main.message = null;\n//     if(!$auth.isAuthenticated() && protectedStates.includes(toState.name)) {\n//       e.preventDefault();\n//       $state.go('login');\n//       main.message = 'You must be logged in to go there!';\n//     }\n//\n//   }\n//\n//   $rootScope.$on('$stateChangeStart', secureState);\n//\n//   main.logout = logout;\n//   main.toggleMenu = toggleMenu;\n//\n//\n// }\n","angular.module('finalProject')\n  .factory('Mubee', Mubee);\n\nMubee.$inject = ['$resource', 'API_URL'];\nfunction Mubee($resource, API_URL) {\n  return new $resource(`${API_URL}/mubees/:id`, { id: '@id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","angular.module('finalProject')\n  .controller('MubeesEditController', MubeesEditController)\n  .controller('MubeesShowController', MubeesShowController)\n  .controller('MubeesCreateController', MubeesCreateController);\n\nMubeesCreateController.$inject = ['Mubee', '$state', 'Contract'];\nfunction MubeesCreateController(Mubee, $state, Contract) {\n  const mubeesCreate = this;\n\n  mubeesCreate.mubee = {\n    crew_id: $state.params.crewId\n  };\n\n  mubeesCreate.contracts = Contract.query();\n\n  function createMubee() {\n    Mubee.save(mubeesCreate.mubee, () => {\n      $state.go('usersDashboard');\n    });\n  }\n\n  mubeesCreate.create = createMubee;\n}\n\n\nMubeesShowController.$inject = ['Mubee', 'Review', '$state', '$auth'];\nfunction MubeesShowController(Mubee, Review, $state, $auth) {\n  const mubeesShow = this;\n\n  function acceptRequest() {\n    console.log('clicked');\n    mubeesShow.mubee.accepted = true;\n    mubeesShow.mubee.$update(() => {\n      $state.go('usersDashboard');\n    });\n  }\n\n  function isCurrentMubee() {\n    return $auth.getPayload().id === Number($state.params.id);\n  }\n\n  mubeesShow.isCurrentMubee = isCurrentMubee;\n  mubeesShow.acceptRequest = acceptRequest;\n\n  mubeesShow.mubee = Mubee.get($state.params);\n\n  function createReview() {\n    const currentUserId = $auth.getPayload().id;\n\n    mubeesShow.review.sender = currentUserId;\n    mubeesShow.review.recipient = mubeesShow.mubee[mubeesShow.mubee.review_recipient_role].id;\n    mubeesShow.review.mubee_id = mubeesShow.mubee.id;\n\n    console.log(mubeesShow.review);\n    Review.save(mubeesShow.review, () => {\n      // $state.go('usersShow', {id: });\n    });\n  }\n\n  mubeesShow.createReview = createReview;\n}\n\n\nMubeesEditController.$inject = ['Mubee', '$state'];\nfunction MubeesEditController(Mubee, $state) {\n  const mubeesEdit = this;\n\n  mubeesEdit.mubee = Mubee.get($state.params);\n\n  function update() {\n    mubeesEdit.mubee.$update(() => {\n      $state.go('mubeesShow', $state.params);\n\n    });\n  }\n  this.update = update;\n}\n","angular.module('finalProject')\n  .factory('Review', Review);\n\nReview.$inject = ['$resource', 'API_URL'];\nfunction Review($resource, API_URL) {\n  return new $resource(`${API_URL}/reviews/:id`, { id: '@id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","angular.module('finalProject')\n  .config(Router);\n\nRouter.$inject = ['$stateProvider', '$urlRouterProvider'];\nfunction Router($stateProvider, $urlRouterProvider) {\n  $stateProvider\n    .state('splash', {\n      url: '/',\n      templateUrl: '/templates/splash.html',\n      controller: 'LoginController as login'\n    })\n    .state('usersIndex', {\n      url: '/users',\n      templateUrl: '/templates/usersIndex.html',\n      controller: 'UsersIndexController as usersIndex'\n    })\n    .state('usersShow', {\n      url: '/users/:id',\n      templateUrl: '/templates/usersShow.html',\n      controller: 'UsersShowController as usersShow'\n    })\n    .state('usersEdit', {\n      url: '/users/:id/edit',\n      templateUrl: '/templates/usersEdit.html',\n      controller: 'UsersEditController as usersEdit'\n    })\n    .state('usersDashboard', {\n      url: '/dashboard',\n      templateUrl: '/templates/dashboard.html',\n      controller: 'UsersDashboardController as usersDashboard'\n    })\n    .state('payments', {\n      url: '/dashboard',\n      templateUrl: '/templates/stripe.html',\n      controller: 'PaymentsController as payments'\n    })\n    // .state('Search', {\n    //   url: '/search',\n    //   templateUrl: '/templates/search.html',\n    //   controller: 'UsersSearchController as Search'\n    // })\n    .state('mubeesCreate', {\n      url: '/mubees?crewId',\n      templateUrl: '/templates/mubeesCreate.html',\n      controller: 'MubeesCreateController as mubeesCreate'\n    })\n    .state('mubeesShow', {\n      url: '/mubees/:id',\n      templateUrl: '/templates/mubeesShow.html',\n      controller: 'MubeesShowController as mubeesShow'\n    })\n    .state('mubeesEdit', {\n      url: '/mubees/:id/edit',\n      templateUrl: '/templates/mubeesEdit.html',\n      controller: 'MubeesEditController as mubeesEdit'\n    })\n    .state('register', {\n      url: '/register',\n      templateUrl: '/templates/register.html',\n      controller: 'RegisterController as register'\n    })\n    .state('login', {\n      url: '/login',\n      templateUrl: '/templates/login.html',\n      controller: 'LoginController as login'\n    });\n\n  $urlRouterProvider.otherwise('/');\n}\n","angular.module('finalProject')\n  .factory('Skill', Skill);\n\nSkill.$inject = ['$resource', 'API_URL'];\nfunction Skill($resource, API_URL) {\n  return new $resource(`${API_URL}/skills/:id`, { id: '@id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","//\n// (function() {\n//   'use strict';\n//\n//   angular\n//     .module('app', [])\n//     .controller('RatingController', RatingController)\n//     .directive('starRating', starRating);\n//\n//   function RatingController() {\n//     this.rating1 = 5;\n//     this.rating2 = 2;\n//     this.isReadonly = true;\n//     this.rateFunction = function(rating) {\n//       console.log('Rating selected: ' + rating);\n//     };\n//   }\n\nangular.module('finalProject')\n.directive('starRating', starRating)\n.controller('RatingController', RatingController);\n\nfunction RatingController() {\n  this.rating1 = 5;\n  this.rating2 = 2;\n  this.isReadonly = true;\n  this.rateFunction = function(rating) {\n    console.log('Rating selected: ' + rating);\n  };\n}\n\n\nstarRating.$inject = ['$window'];\nfunction starRating() {\n  return {\n    restrict: 'EA',\n    template:\n      '<ul class=\"star-rating\" ng-class=\"{readonly: readonly}\">' +\n      '  <li ng-repeat=\"star in stars\" class=\"star\" ng-class=\"{filled: star.filled}\" ng-click=\"toggle($index)\">' +\n      '    <i class=\"fa fa-star\"></i>' + // or &#9733\n      '  </li>' +\n      '</ul>',\n    scope: {\n      ratingValue: '=ngModel',\n      max: '=?', // optional (default is 5)\n      onRatingSelect: '&?',\n      readonly: '=?'\n    },\n    link: function(scope, element, attributes) {\n      if (scope.max === undefined) {\n        scope.max = 5;\n      }\n      function updateStars() {\n        scope.stars = [];\n        for (var i = 0; i < scope.max; i++) {\n          scope.stars.push({\n            filled: i < scope.ratingValue\n          });\n        }\n      }\n      scope.toggle = function(index) {\n        if (scope.readonly === undefined || scope.readonly === false){\n          scope.ratingValue = index + 1;\n          scope.onRatingSelect({\n            rating: index + 1\n          });\n        }\n      };\n      scope.$watch('ratingValue', function(oldValue, newValue) {\n        if (newValue) {\n          updateStars();\n        }\n      });\n    }\n  };\n}\n","angular.module('finalProject')\n  .factory('User', User);\n\nUser.$inject = ['$resource', 'API_URL'];\nfunction User($resource, API_URL) {\n  return new $resource(`${API_URL}/users/:id`, { id: '@id' }, {\n    update: { method: 'PUT' }\n  });\n}\n","angular.module('finalProject')\n  .controller('UsersIndexController', UsersIndexController)\n  .controller('UsersShowController', UsersShowController)\n  .controller('UsersEditController', UsersEditController)\n  .controller('UsersDashboardController', UsersDashboardController);\n\n\nUsersIndexController.$inject = ['User','Skill'];\nfunction UsersIndexController(User, Skill) {\n  const usersIndex = this;\n\n  usersIndex.skills = Skill.query();\n\n  usersIndex.showForm = true;\n  usersIndex.params = {};\n  function filterUsers() {\n    if(usersIndex.querySkills) {\n      const skill_ids = usersIndex.querySkills.map((skill) => {\n        return skill.id;\n      });\n\n      usersIndex.params['skill_ids[]'] = skill_ids;\n    }\n\n    usersIndex.all = User.query(usersIndex.params);\n    usersIndex.showForm = false;\n  }\n\n  usersIndex.filterUsers = filterUsers;\n\n}\n\nUsersShowController.$inject = ['User', '$state', '$auth','Review'];\nfunction UsersShowController(User, $state, $auth, Review) {\n  const usersShow = this;\n  usersShow.review = {};\n\n  if($auth.isAuthenticated()) {\n    usersShow.currentUserId = $auth.getPayload().id;\n  }\n\n  function isCurrentUser() {\n    return $auth.getPayload().id === Number($state.params.id);\n  }\n\n  function createReview() {\n    usersShow.review.producer_id = usersShow.currentUserId;\n    usersShow.review.crew_id = $state.params.id;\n    Review.save(usersShow.review, () => {\n      usersShow.user = User.get($state.params);\n    });\n  }\n\n  usersShow.createReview = createReview;\n\n  usersShow.isCurrentUser = isCurrentUser;\n\n  usersShow.user = User.get($state.params);\n}\n\nUsersEditController.$inject = ['User', '$state', '$auth', 'Skill'];\nfunction UsersEditController(User, $state, $auth, Skill) {\n  const usersEdit = this;\n\n  usersEdit.skills = Skill.query();\n\n  function isCurrentUser() {\n    return $auth.getPayload().id === Number($state.params.id);\n  }\n\n  usersEdit.isCurrentUser = isCurrentUser;\n\n  usersEdit.user = User.get($state.params);\n\n  function addSkills() {\n    const skill_ids = usersEdit.querySkills.map((skill) => {\n      return skill.id;\n    });\n    usersEdit.user.skill_ids = skill_ids;\n  }\n\n  usersEdit.addSkills = addSkills;\n\n\n  function update() {\n    usersEdit.user.$update(() => {\n      $state.go('usersShow', $state.params);\n    });\n  }\n  this.update = update;\n}\n\n\nUsersDashboardController.$inject = ['User', '$state', '$auth', '$http'];\nfunction UsersDashboardController(User, $state, $auth, $http) {\n  const usersDashboard = this;\n  const currentUserId = $auth.getPayload().id;\n\n  usersDashboard.user = User.get({id: currentUserId});\n\n\n  // const token = `Bearer ${$auth.getToken()}`;\n  //\n  // const req = {\n  //   method: 'GET',\n  //   url: 'http://localhost:3000/api/dashboard',\n  //   headers: { authorizaton: token }\n  // };\n  // $http(req).then((response) => {\n  //   usersDashboard.user = response.data.user;\n  //   usersDashboard.mubees = response.data.mubees;\n  // });\n\n}\n","angular.module('finalProject')\n.controller('PaymentsController', function($scope, $http) {\n  $scope.saveCustomer = function(status, response) {\n    console.log(status);\n    console.log(response);\n    // $http.post('/save_customer', { token: response.id });\n  };\n});\n"]}